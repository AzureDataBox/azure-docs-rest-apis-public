### YamlMime:RESTOperation
uid: <fully-qualifiediothubdomainname>.iothub.devicetwinapi.updatedevicetwin
name: Update Device Twin
service: iothub
groupName: Device Twin Api
apiVersion: 2016-11-14
summary: "Updates tags and desired properties of a device twin.  \nUpdate a device twin. See https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-device-twins for more information. This capability is only available in the standard tier IoT Hub. For more information, see [Choose the right IoT Hub tier](https://aka.ms/scaleyouriotsolution)."
consumes:
- application/json
- text/json
produces:
- application/json
- text/json
paths:
- content: PATCH https://<fully-qualified IoT hub domain name>/twins/{id}?api-version=2016-11-14
uriParameters:
- name: api-version
  in: query
  isRequired: true
  description: The version of the API.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: DeviceTwinInfo
requestBody:
- parameters:
  - name: DeviceId
    in: body
    description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
  - name: LastActivityTimeUtc
    in: body
    description: The last time the device connected, received or sent a message. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
  - name: IsConnected
    in: body
    description: Indicates if the device is currently connected to the IoT hub or not.
    types:
    - uid: boolean
  - name: LastConnectedTimeUtc
    in: body
    description: The last time the device connected to the IoT hub. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
  - name: Version
    in: body
    description: Version for device twin, including tags and desired properties
    types:
    - uid: integer
  - name: Tags
    in: body
    description: A JSON document read and written by the solution back end. Tags are not visible to device apps.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: DesiredProperties
    in: body
    description: Used in conjunction with reported properties to synchronize device configuration or condition. Desired properties can only be set by the solution back end and can be read by the device app. The device app can also be notified in real time of changes on the desired properties.
    types:
    - uid: DeviceTwinProperties
  - name: ReportedProperties
    in: body
    description: Used in conjunction with desired properties to synchronize device configuration or condition. Reported properties can only be set by the device app and can be read and queried by the solution back end.
    types:
    - uid: DeviceTwinProperties
  - name: ProvisioningState
    in: body
    description: Provisioning state of device twin.
    types:
    - uid: ProvisioningState
requestHeader: []
definitions:
- name: VariantValueDateTime
  description: Type representing DateTime in different time zones.
  kind: object
  properties:
  - name: Value
    isReadyOnly: true
    description: ''
    types:
    - uid: string
  - name: ObjectValue
    isReadyOnly: true
    description: ''
    types:
    - uid: object
  - name: IsNull
    isReadyOnly: true
    description: ''
    types:
    - uid: boolean
- name: DeviceTwinProperties
  description: Type representing properties that are part of an IoT Hub device twin.
  kind: object
  properties:
  - name: Version
    description: Version of device twin properties.
    types:
    - uid: integer
  - name: Properties
    description: Properties JSON element.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: Metadata
    description: Metadata information for the properties JSON document.
    types:
    - uid: Metadata
- name: DeviceTwinInfo
  description: Container of IoT Hub device twin properties and their accessors.
  kind: object
  properties:
  - name: DeviceId
    description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
  - name: LastActivityTimeUtc
    description: The last time the device connected, received or sent a message. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
  - name: IsConnected
    description: Indicates if the device is currently connected to the IoT hub or not.
    types:
    - uid: boolean
  - name: LastConnectedTimeUtc
    description: The last time the device connected to the IoT hub. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
  - name: Version
    description: Version for device twin, including tags and desired properties
    types:
    - uid: integer
  - name: Tags
    description: A JSON document read and written by the solution back end. Tags are not visible to device apps.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: DesiredProperties
    description: Used in conjunction with reported properties to synchronize device configuration or condition. Desired properties can only be set by the solution back end and can be read by the device app. The device app can also be notified in real time of changes on the desired properties.
    types:
    - uid: DeviceTwinProperties
  - name: ReportedProperties
    description: Used in conjunction with desired properties to synchronize device configuration or condition. Reported properties can only be set by the device app and can be read and queried by the solution back end.
    types:
    - uid: DeviceTwinProperties
  - name: ProvisioningState
    description: Provisioning state of device twin.
    types:
    - uid: ProvisioningState
- name: Metadata
  description: Metadata
  kind: object
  properties:
  - name: LastUpdatedUtc
    description: The last time the properties were updated. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z.
    types:
    - uid: VariantValueDateTime
  - name: LastUpdatedVersion
    description: This SHOULD be null for Reported properties metadata and MUST not be null for Desired properties metadata.
    types:
    - uid: integer
  - name: HasChildren
    isReadyOnly: true
    description: True if nested properies are present.
    types:
    - uid: boolean
  - name: Nested
    isReadyOnly: true
    description: Nested properties.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: Metadata
- name: ProvisioningState
  description: Provisioning state of device twin.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Active
    types:
    - uid: string
  - name: Deleted
    types:
    - uid: string
- name: Nested
  description: Nested properties.
  kind: object
  properties:
  - name: ''
    description: Metadata
    types:
    - uid: Metadata
examples: []
security: []
