### YamlMime:RESTOperation
uid: <fully-qualifiediothubdomainname>.iothub.deviceapi.bulkdeviceoperation
name: Bulk Device Operation
service: iothub
groupName: Device Api
apiVersion: 2016-11-14
summary: "Create, update, or delete the identities of multiple devices from the IoT hub identity registry.  \nCreate, update, or delete the identiies of multiple devices from the IoT hub identity registry. A device identity can be specified only once in the list. Different operations (create, update, delete) on different devices are allowed. A maximum of 100 devices can be specified per invocation. For large scale operations, consider using the import feature using blob storage(https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-identity-registry#import-and-export-device-identities)."
consumes:
- application/json
- text/json
produces:
- application/json
- text/json
paths:
- content: POST https://<fully-qualified IoT hub domain name>/devices?api-version=2016-11-14
uriParameters:
- name: api-version
  in: query
  isRequired: true
  description: The version of the API.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: BulkRegistryOperationResult
- name: 400 Bad Request
  description: BadRequest
  types:
  - uid: BulkRegistryOperationResult
requestBody:
- parameters:
  - name: id
    in: body
    isRequired: true
    description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
  - name: eTag
    in: body
    description: ''
    types:
    - uid: string
  - name: importMode
    in: body
    description: Identifies the behavior when merging a device to the registry during import actions.
    types:
    - uid: ImportMode
  - name: status
    in: body
    isRequired: true
    description: Represents the current status of a device. A disabled device is not allowed to perform any messaging operation. An IoT hub administrator can choose to enable or disable a device.
    types:
    - uid: DeviceStatus
  - name: statusReason
    in: body
    description: A string of user metadata. Reason, if any, for the device to be in specified status. Not interpreted or used by Iot Hub.
    types:
    - uid: string
  - name: authentication
    in: body
    description: Used to specify the authentication mechanism used by a device. Two mutually-exclusive options are supported - shared access signature keys and device X.509 client certificates.
    types:
    - uid: AuthenticationMechanism
  - name: tags
    in: body
    description: A set of key-value pair tags. You can use tags to select devices when you query the identity registry.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: properties
    in: body
    description: Container of desired and reported IoT Hub device twin properties.
    types:
    - uid: PropertyContainer
requestHeader: []
definitions:
- name: AuthenticationMechanism
  description: Used to specify the authentication mechanism used by a device. Two mutually-exclusive options are supported - shared access signature keys and device X.509 client certificates.
  kind: object
  properties:
  - name: symmetricKey
    description: Primary and secondary shared access signature symmetric keys of a device. If specified, both primary key and secondary key are required. The keys must be in valid base-64 format with a key length between 16 bytes and 64 bytes. They can be identical. If they are not specified, the Iot Hub generates both keys for the device with a default key length of 32 bytes.
    types:
    - uid: SymmetricKey
  - name: x509Thumbprint
    description: If the device is using X.509 client certificates for authentication, at least one of primaryThumbprint or secondaryThumbprint must be specified. They can be identical.
    types:
    - uid: X509Thumbprint
- name: PropertyContainer
  description: Container of desired and reported IoT Hub device twin properties.
  kind: object
  properties:
  - name: desired
    description: Type representing properties that are part of IoT Hub device twin.
    types:
    - uid: DeviceTwinProperties
  - name: reported
    description: Type representing properties that are part of IoT Hub device twin.
    types:
    - uid: DeviceTwinProperties
- name: BulkRegistryOperationResult
  description: Encapsulates the result of a bulk device identity operation. The "errors" array contains an entry for each error encountered during the bulk device identity operation. The "warnings" array contains an entry for each warning encountered during the bulk device identity operation.
  kind: object
  properties:
  - name: isSuccessful
    description: ''
    types:
    - uid: boolean
  - name: errors
    description: Encapsulated device identity operation error details.
    types:
    - uid: DeviceRegistryOperationError
      isArray: true
  - name: warnings
    description: Encapsulated device identity operation warning details.
    types:
    - uid: DeviceRegistryOperationWarning
      isArray: true
- name: ExportImportDevice
  description: Container of IoT Hub device properties and their accessors for import and export scenarios
  kind: object
  properties:
  - name: id
    description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
  - name: eTag
    description: ''
    types:
    - uid: string
  - name: importMode
    description: Identifies the behavior when merging a device to the registry during import actions.
    types:
    - uid: ImportMode
  - name: status
    description: Represents the current status of a device. A disabled device is not allowed to perform any messaging operation. An IoT hub administrator can choose to enable or disable a device.
    types:
    - uid: DeviceStatus
  - name: statusReason
    description: A string of user metadata. Reason, if any, for the device to be in specified status. Not interpreted or used by Iot Hub.
    types:
    - uid: string
  - name: authentication
    description: Used to specify the authentication mechanism used by a device. Two mutually-exclusive options are supported - shared access signature keys and device X.509 client certificates.
    types:
    - uid: AuthenticationMechanism
  - name: tags
    description: A set of key-value pair tags. You can use tags to select devices when you query the identity registry.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: properties
    description: Container of desired and reported IoT Hub device twin properties.
    types:
    - uid: PropertyContainer
- name: SymmetricKey
  description: Primary and secondary shared access signature symmetric keys of a device. If specified, both primary key and secondary key are required. The keys must be in valid base-64 format with a key length between 16 bytes and 64 bytes. They can be identical. If they are not specified, the Iot Hub generates both keys for the device with a default key length of 32 bytes.
  kind: object
  properties:
  - name: primaryKey
    description: ''
    types:
    - uid: string
  - name: secondaryKey
    description: ''
    types:
    - uid: string
- name: X509Thumbprint
  description: If the device is using X.509 client certificates for authentication, at least one of primaryThumbprint or secondaryThumbprint must be specified. They can be identical.
  kind: object
  properties:
  - name: primaryThumbprint
    description: Represents the SHA-1 hash of the X.509 client certificate used by the device when connecting to an IoT hub. Thumbprint values other than 40 hex chars are not accepted.
    types:
    - uid: string
  - name: secondaryThumbprint
    description: Represents the SHA-1 hash of the X.509 client certificate used by the device when connecting to an IoT hub. Thumbprint values other than 40 hex chars are not accepted.
    types:
    - uid: string
- name: DeviceTwinProperties
  description: Type representing properties that are part of IoT Hub device twin.
  kind: object
  properties:
  - name: Version
    description: ''
    types:
    - uid: integer
  - name: Properties
    description: ''
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: Metadata
    description: Metadata
    types:
    - uid: Metadata
- name: DeviceRegistryOperationError
  description: Encapsulated device identity operation error details.
  kind: object
  properties:
  - name: deviceId
    description: ''
    types:
    - uid: string
  - name: errorCode
    description: ''
    types:
    - uid: ErrorCode
  - name: errorStatus
    description: ''
    types:
    - uid: string
- name: DeviceRegistryOperationWarning
  description: Encapsulated device identity operation warning details.
  kind: object
  properties:
  - name: deviceId
    description: ''
    types:
    - uid: string
  - name: warningCode
    description: ''
    types:
    - uid: WarningCode
  - name: warningStatus
    description: ''
    types:
    - uid: string
- name: ImportMode
  description: Identifies the behavior when merging a device to the registry during import actions.
  kind: enum
  properties:
  - name: createOrUpdate
    types:
    - uid: string
  - name: create
    types:
    - uid: string
  - name: update
    types:
    - uid: string
  - name: updateIfMatchETag
    types:
    - uid: string
  - name: createOrUpdateIfMatchETag
    types:
    - uid: string
  - name: delete
    types:
    - uid: string
  - name: deleteIfMatchETag
    types:
    - uid: string
- name: DeviceStatus
  description: Represents the current status of a device. A disabled device is not allowed to perform any messaging operation. An IoT hub administrator can choose to enable or disable a device.
  kind: enum
  properties:
  - name: enabled
    types:
    - uid: string
  - name: disabled
    types:
    - uid: string
- name: Metadata
  description: Metadata
  kind: object
  properties:
  - name: LastUpdatedUtc
    description: The last time the properties were updated. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z.
    types:
    - uid: VariantValueDateTime
  - name: LastUpdatedVersion
    description: This SHOULD be null for Reported properties metadata and MUST not be null for Desired properties metadata.
    types:
    - uid: integer
  - name: HasChildren
    isReadyOnly: true
    description: True if nested properies are present.
    types:
    - uid: boolean
  - name: Nested
    isReadyOnly: true
    description: Nested properties.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: Metadata
- name: ErrorCode
  kind: enum
  properties:
  - name: InvalidErrorCode
    types:
    - uid: string
  - name: InvalidProtocolVersion
    types:
    - uid: string
  - name: DeviceInvalidResultCount
    types:
    - uid: string
  - name: InvalidOperation
    types:
    - uid: string
  - name: ArgumentInvalid
    types:
    - uid: string
  - name: ArgumentNull
    types:
    - uid: string
  - name: IotHubFormatError
    types:
    - uid: string
  - name: DeviceStorageEntitySerializationError
    types:
    - uid: string
  - name: BlobContainerValidationError
    types:
    - uid: string
  - name: ImportWarningExistsError
    types:
    - uid: string
  - name: InvalidSchemaVersion
    types:
    - uid: string
  - name: DeviceDefinedMultipleTimes
    types:
    - uid: string
  - name: DeserializationError
    types:
    - uid: string
  - name: BulkRegistryOperationFailure
    types:
    - uid: string
  - name: DefaultStorageEndpointNotConfigured
    types:
    - uid: string
  - name: InvalidFileUploadCorrelationId
    types:
    - uid: string
  - name: ExpiredFileUploadCorrelationId
    types:
    - uid: string
  - name: InvalidStorageEndpoint
    types:
    - uid: string
  - name: InvalidMessagingEndpoint
    types:
    - uid: string
  - name: InvalidFileUploadCompletionStatus
    types:
    - uid: string
  - name: InvalidStorageEndpointOrBlob
    types:
    - uid: string
  - name: RequestCanceled
    types:
    - uid: string
  - name: InvalidStorageEndpointProperty
    types:
    - uid: string
  - name: InvalidRouteTestInput
    types:
    - uid: string
  - name: InvalidSourceOnRoute
    types:
    - uid: string
  - name: IotHubNotFound
    types:
    - uid: string
  - name: IotHubUnauthorizedAccess
    types:
    - uid: string
  - name: IotHubUnauthorized
    types:
    - uid: string
  - name: IotHubSuspended
    types:
    - uid: string
  - name: IotHubQuotaExceeded
    types:
    - uid: string
  - name: JobQuotaExceeded
    types:
    - uid: string
  - name: DeviceMaximumQueueDepthExceeded
    types:
    - uid: string
  - name: IotHubMaxCbsTokenExceeded
    types:
    - uid: string
  - name: DeviceMaximumActiveFileUploadLimitExceeded
    types:
    - uid: string
  - name: DeviceMaximumQueueSizeExceeded
    types:
    - uid: string
  - name: DeviceModelMaxPropertiesExceeded
    types:
    - uid: string
  - name: DeviceModelMaxIndexablePropertiesExceeded
    types:
    - uid: string
  - name: DeviceNotFound
    types:
    - uid: string
  - name: JobNotFound
    types:
    - uid: string
  - name: PartitionNotFound
    types:
    - uid: string
  - name: QuotaMetricNotFound
    types:
    - uid: string
  - name: SystemPropertyNotFound
    types:
    - uid: string
  - name: AmqpAddressNotFound
    types:
    - uid: string
  - name: QueryStoreClusterNotFound
    types:
    - uid: string
  - name: DeviceNotOnline
    types:
    - uid: string
  - name: OperationNotAllowedInCurrentState
    types:
    - uid: string
  - name: ImportDevicesNotSupported
    types:
    - uid: string
  - name: BulkAddDevicesNotSupported
    types:
    - uid: string
  - name: DeviceAlreadyExists
    types:
    - uid: string
  - name: LinkCreationConflict
    types:
    - uid: string
  - name: ModelAlreadyExists
    types:
    - uid: string
  - name: DeviceLocked
    types:
    - uid: string
  - name: DeviceJobAlreadyExists
    types:
    - uid: string
  - name: PreconditionFailed
    types:
    - uid: string
  - name: DeviceMessageLockLost
    types:
    - uid: string
  - name: JobRunPreconditionFailed
    types:
    - uid: string
  - name: MessageTooLarge
    types:
    - uid: string
  - name: TooManyDevices
    types:
    - uid: string
  - name: IncompatibleDataType
    types:
    - uid: string
  - name: ThrottlingException
    types:
    - uid: string
  - name: ThrottleBacklogLimitExceeded
    types:
    - uid: string
  - name: ThrottlingBacklogTimeout
    types:
    - uid: string
  - name: ThrottlingMaxActiveJobCountExceeded
    types:
    - uid: string
  - name: ServerError
    types:
    - uid: string
  - name: JobCancelled
    types:
    - uid: string
  - name: StatisticsRetrievalError
    types:
    - uid: string
  - name: ConnectionForcefullyClosed
    types:
    - uid: string
  - name: InvalidBlobState
    types:
    - uid: string
  - name: BackupTimedOut
    types:
    - uid: string
  - name: AzureStorageTimeout
    types:
    - uid: string
  - name: GenericTimeout
    types:
    - uid: string
  - name: InvalidThrottleParameter
    types:
    - uid: string
  - name: EventHubLinkAlreadyClosed
    types:
    - uid: string
  - name: ReliableBlobStoreError
    types:
    - uid: string
  - name: RetryAttemptsExhausted
    types:
    - uid: string
  - name: UnexpectedPropertyValue
    types:
    - uid: string
  - name: OrchestrationOperationFailed
    types:
    - uid: string
  - name: InvalidResponseWhileProxying
    types:
    - uid: string
  - name: ServiceUnavailable
    types:
    - uid: string
  - name: IotHubFailingOver
    types:
    - uid: string
  - name: ConnectionUnavailable
    types:
    - uid: string
  - name: DeviceUnavailable
    types:
    - uid: string
  - name: GatewayTimeout
    types:
    - uid: string
- name: WarningCode
  kind: enum
  properties:
  - name: DeviceRegisteredWithoutTwin
    types:
    - uid: string
- name: VariantValueDateTime
  description: Type representing DateTime in different time zones.
  kind: object
  properties:
  - name: Value
    isReadyOnly: true
    description: ''
    types:
    - uid: string
  - name: ObjectValue
    isReadyOnly: true
    description: ''
    types:
    - uid: object
  - name: IsNull
    isReadyOnly: true
    description: ''
    types:
    - uid: boolean
- name: Nested
  description: Nested properties.
  kind: object
  properties:
  - name: ''
    description: Metadata
    types:
    - uid: Metadata
examples: []
security: []
