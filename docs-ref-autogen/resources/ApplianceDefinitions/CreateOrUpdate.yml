### YamlMime:RESTOperation
uid: management.azure.com.resourcemanagement.appliancedefinitions.createorupdate
name: Create Or Update
service: Resource Management
groupName: Appliance Definitions
apiVersion: 2016-09-01-preview
summary: Creates a new appliance definition.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Solutions/applianceDefinitions/{applianceDefinitionName}?api-version=2016-09-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: applianceDefinitionName
  in: path
  isRequired: true
  description: The name of the appliance definition.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK - Returns information about the appliance definition, including provisioning status.
  types:
  - uid: ApplianceDefinition
- name: 201 Created
  description: Created - Returns information about the appliance definition, including provisioning status.
  types:
  - uid: ApplianceDefinition
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- parameters:
  - name: properties.lockLevel
    in: body
    isRequired: true
    description: The appliance lock level.
    types:
    - uid: ApplianceLockLevel
  - name: properties.displayName
    in: body
    description: The appliance definition display name.
    types:
    - uid: string
  - name: properties.authorizations
    in: body
    isRequired: true
    description: The appliance provider authorization.
    types:
    - uid: ApplianceProviderAuthorization
      isArray: true
  - name: properties.artifacts
    in: body
    description: Appliance artifact.
    types:
    - uid: ApplianceArtifact
      isArray: true
  - name: properties.description
    in: body
    description: The appliance definition description.
    types:
    - uid: string
  - name: properties.packageFileUri
    in: body
    isRequired: true
    description: The appliance definition package file Uri.
    types:
    - uid: string
  - name: managedBy
    in: body
    description: ID of the resource that manages this resource.
    types:
    - uid: string
  - name: sku
    in: body
    description: The SKU of the resource.
    types:
    - uid: Sku
  - name: identity
    in: body
    description: The identity of the resource.
    types:
    - uid: Identity
  - name: location
    in: body
    description: Resource location
    types:
    - uid: string
  - name: tags
    in: body
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: ApplianceProviderAuthorization
  description: The appliance provider authorizations.
  kind: object
  properties:
  - name: principalId
    description: The provider's principal identifier. This is the identity that the provider will use to call ARM to manage the appliance resources.
    types:
    - uid: string
  - name: roleDefinitionId
    description: The provider's role definition identifier. This role will define all the permissions that the provider must have on the appliance's container resource group. This role definition cannot have permission to delete the resource group.
    types:
    - uid: string
- name: ApplianceArtifact
  description: The collection of appliance artifacts. The portal will use the files specified as artifacts to construct the user experience of creating an appliance from an appliance definition.
  kind: object
  properties:
  - name: name
    description: The appliance artifact name.
    types:
    - uid: string
  - name: uri
    description: The appliance artifact blob uri.
    types:
    - uid: string
  - name: type
    description: The the appliance artifact type.
    types:
    - uid: ApplianceArtifactType
- name: Sku
  description: The SKU of the resource.
  kind: object
  properties:
  - name: name
    description: The SKU name.
    types:
    - uid: string
  - name: tier
    description: The SKU tier.
    types:
    - uid: string
  - name: size
    description: The SKU size.
    types:
    - uid: string
  - name: family
    description: The SKU family.
    types:
    - uid: string
  - name: model
    description: The SKU model.
    types:
    - uid: string
  - name: capacity
    description: The SKU capacity.
    types:
    - uid: integer
- name: Identity
  description: The identity of the resource.
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: type
    description: The identity type.
    types:
    - uid: ResourceIdentityType
- name: ApplianceDefinition
  description: Information about appliance definition.
  kind: object
  properties:
  - name: properties.lockLevel
    description: The appliance lock level.
    types:
    - uid: ApplianceLockLevel
  - name: properties.displayName
    description: The appliance definition display name.
    types:
    - uid: string
  - name: properties.authorizations
    description: The appliance provider authorization.
    types:
    - uid: ApplianceProviderAuthorization
      isArray: true
  - name: properties.artifacts
    description: Appliance artifact.
    types:
    - uid: ApplianceArtifact
      isArray: true
  - name: properties.description
    description: The appliance definition description.
    types:
    - uid: string
  - name: properties.packageFileUri
    description: The appliance definition package file Uri.
    types:
    - uid: string
  - name: managedBy
    description: ID of the resource that manages this resource.
    types:
    - uid: string
  - name: sku
    description: The SKU of the resource.
    types:
    - uid: Sku
  - name: identity
    description: The identity of the resource.
    types:
    - uid: Identity
  - name: id
    isReadyOnly: true
    description: Resource ID
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ErrorResponse
  description: Error reponse indicates ARM appliance is not able to process the incoming request. The reason is provided in the error message.
  kind: object
  properties:
  - name: httpStatus
    description: Http status code.
    types:
    - uid: string
  - name: errorCode
    description: Error code.
    types:
    - uid: string
  - name: errorMessage
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: ApplianceArtifactType
  description: The the appliance artifact type.
  kind: enum
  properties:
  - name: Template
    types:
    - uid: string
  - name: Custom
    types:
    - uid: string
- name: ResourceIdentityType
  description: The identity type.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
- name: ApplianceLockLevel
  description: The appliance lock level.
  kind: enum
  properties:
  - name: CanNotDelete
    types:
    - uid: string
  - name: ReadOnly
    types:
    - uid: string
  - name: None
    types:
    - uid: string
examples:
- name: Create or update appliance definition
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg/providers/Microsoft.Solutions/applianceDefinitions/myApplianceDef?api-version=2016-09-01-preview
    body: >-
      {
        "properties": {
          "lockLevel": "None",
          "displayName": "myApplianceDef",
          "description": "myApplianceDef description",
          "authorizations": [
            {
              "principalId": "validprincipalguid",
              "roleDefinitionId": "validroleguid"
            }
          ],
          "packageFileUri": "https://path/to/packagezipfile"
        },
        "location": "East US 2"
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "name": "myApplianceDef",
        "id": "/subscriptions/subid/resourceGroups/rg/providers/Microsoft.Solutions/applianceDefinitions/myApplianceDef",
        "type": "Microsoft.Solutions/applianceDefinitions",
        "location": "East US 2",
        "managedBy": null,
        "resourceGroup": "rg",
        "tags": null,
        "identity": null,
        "sku": null,
        "properties": {
          "artifacts": [
            {
              "name": "CreateUiDefinition",
              "type": "Custom",
              "uri": "https://path/to/applianceCreateUiDefinition.json"
            },
            {
              "name": "ApplianceResourceTemplate",
              "type": "Template",
              "uri": "https://path/to/mainTemplate.json"
            }
          ],
          "authorizations": [
            {
              "principalId": "validprincipalguid",
              "roleDefinitionId": "validroleguid"
            }
          ],
          "description": "myApplianceDef description",
          "displayName": "myApplianceDef",
          "lockLevel": null,
          "packageFileUri": "https://path/to/packagezipfile"
        }
      }
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
