### YamlMime:RESTOperation
summary: Creates a new appliance definition.
service: Resource Management
apiVersion: 2016-09-01-preview
groupName: Appliance Definitions
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Solutions/applianceDefinitions/{applianceDefinitionName}?api-version=2016-09-01-preview
uriParameters:
- in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
  name: subscriptionId
- in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
  name: resourceGroupName
- in: path
  isRequired: true
  description: The name of the appliance definition.
  types:
  - uid: string
  name: applianceDefinitionName
- in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
  name: api-version
responses:
- description: OK - Returns information about the appliance definition, including provisioning status.
  types:
  - uid: ApplianceDefinition
  name: 200 OK
- description: Created - Returns information about the appliance definition, including provisioning status.
  types:
  - uid: ApplianceDefinition
  name: 201 Created
- description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
  name: Other Status Codes
requestBody:
- parameters:
  - in: body
    isRequired: true
    description: The appliance lock level.
    types:
    - uid: ApplianceLockLevel
    name: properties.lockLevel
  - in: body
    description: The appliance definition display name.
    types:
    - uid: string
    name: properties.displayName
  - in: body
    isRequired: true
    description: The appliance provider authorizations.
    types:
    - uid: ApplianceProviderAuthorization
    name: properties.authorizations
  - in: body
    description: The collection of appliance artifacts. The portal will use the files specified as artifacts to construct the user experience of creating an appliance from an appliance definition.
    types:
    - uid: ApplianceArtifact
    name: properties.artifacts
  - in: body
    description: The appliance definition description.
    types:
    - uid: string
    name: properties.description
  - in: body
    isRequired: true
    description: The appliance definition package file Uri.
    types:
    - uid: string
    name: properties.packageFileUri
  - in: body
    description: ID of the resource that manages this resource.
    types:
    - uid: string
    name: managedBy
  - in: body
    description: The SKU of the resource.
    types:
    - uid: Sku
    name: sku
  - in: body
    description: The identity of the resource.
    types:
    - uid: Identity
    name: identity
  - in: body
    description: Resource location
    types:
    - uid: string
    name: location
  - in: body
    description: Resource tags
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: tags
requestHeader: []
definitions:
- name: ApplianceProviderAuthorization
  description: The appliance provider authorizations.
  kind: object
  properties:
  - description: The provider's principal identifier. This is the identity that the provider will use to call ARM to manage the appliance resources.
    types:
    - uid: string
    name: principalId
  - description: The provider's role definition identifier. This role will define all the permissions that the provider must have on the appliance's container resource group. This role definition cannot have permission to delete the resource group.
    types:
    - uid: string
    name: roleDefinitionId
- name: ApplianceArtifact
  description: The collection of appliance artifacts. The portal will use the files specified as artifacts to construct the user experience of creating an appliance from an appliance definition.
  kind: object
  properties:
  - description: The appliance artifact name.
    types:
    - uid: string
    name: name
  - description: The appliance artifact blob uri.
    types:
    - uid: string
    name: uri
  - description: The the appliance artifact type.
    types:
    - uid: ApplianceArtifactType
    name: type
- name: Sku
  description: The SKU of the resource.
  kind: object
  properties:
  - description: The SKU name.
    types:
    - uid: string
    name: name
  - description: The SKU tier.
    types:
    - uid: string
    name: tier
  - description: The SKU size.
    types:
    - uid: string
    name: size
  - description: The SKU family.
    types:
    - uid: string
    name: family
  - description: The SKU model.
    types:
    - uid: string
    name: model
  - description: The SKU capacity.
    types:
    - uid: integer
    name: capacity
- name: Identity
  description: The identity of the resource.
  kind: object
  properties:
  - isReadyOnly: true
    description: The principal ID of resource identity.
    types:
    - uid: string
    name: principalId
  - isReadyOnly: true
    description: The tenant ID of resource.
    types:
    - uid: string
    name: tenantId
  - description: The identity type.
    types:
    - uid: ResourceIdentityType
    name: type
- name: ApplianceDefinition
  description: Information about appliance definition.
  kind: object
  properties:
  - description: The appliance lock level.
    types:
    - uid: ApplianceLockLevel
    name: properties.lockLevel
  - description: The appliance definition display name.
    types:
    - uid: string
    name: properties.displayName
  - description: The appliance provider authorizations.
    types:
    - uid: ApplianceProviderAuthorization
    name: properties.authorizations
  - description: The collection of appliance artifacts. The portal will use the files specified as artifacts to construct the user experience of creating an appliance from an appliance definition.
    types:
    - uid: ApplianceArtifact
    name: properties.artifacts
  - description: The appliance definition description.
    types:
    - uid: string
    name: properties.description
  - description: The appliance definition package file Uri.
    types:
    - uid: string
    name: properties.packageFileUri
  - description: ID of the resource that manages this resource.
    types:
    - uid: string
    name: managedBy
  - description: The SKU of the resource.
    types:
    - uid: Sku
    name: sku
  - description: The identity of the resource.
    types:
    - uid: Identity
    name: identity
  - isReadyOnly: true
    description: Resource ID
    types:
    - uid: string
    name: id
  - isReadyOnly: true
    description: Resource name
    types:
    - uid: string
    name: name
  - isReadyOnly: true
    description: Resource type
    types:
    - uid: string
    name: type
  - description: Resource location
    types:
    - uid: string
    name: location
  - description: Resource tags
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: tags
- name: ErrorResponse
  description: Error reponse indicates ARM appliance is not able to process the incoming request. The reason is provided in the error message.
  kind: object
  properties:
  - description: Http status code.
    types:
    - uid: string
    name: httpStatus
  - description: Error code.
    types:
    - uid: string
    name: errorCode
  - description: Error message indicating why the operation failed.
    types:
    - uid: string
    name: errorMessage
- name: ApplianceArtifactType
  description: The the appliance artifact type.
  kind: enum
  properties:
  - types:
    - uid: string
    name: Template
  - types:
    - uid: string
    name: Custom
- name: ResourceIdentityType
  description: The identity type.
  kind: enum
  properties:
  - types:
    - uid: string
    name: SystemAssigned
- name: ApplianceLockLevel
  description: The appliance lock level.
  kind: enum
  properties:
  - types:
    - uid: string
    name: CanNotDelete
  - types:
    - uid: string
    name: ReadOnly
  - types:
    - uid: string
    name: None
examples:
- request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg/providers/Microsoft.Solutions/applianceDefinitions/myApplianceDef?api-version=2016-09-01-preview
    body: >-
      {
        "properties": {
          "lockLevel": "None",
          "displayName": "myApplianceDef",
          "description": "myApplianceDef description",
          "authorizations": [
            {
              "principalId": "validprincipalguid",
              "roleDefinitionId": "validroleguid"
            }
          ],
          "packageFileUri": "https://path/to/packagezipfile"
        },
        "location": "East US 2"
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "name": "myApplianceDef",
        "id": "/subscriptions/subid/resourceGroups/rg/providers/Microsoft.Solutions/applianceDefinitions/myApplianceDef",
        "type": "Microsoft.Solutions/applianceDefinitions",
        "location": "East US 2",
        "managedBy": null,
        "resourceGroup": "rg",
        "tags": null,
        "identity": null,
        "sku": null,
        "properties": {
          "artifacts": [
            {
              "name": "CreateUiDefinition",
              "type": "Custom",
              "uri": "https://path/to/applianceCreateUiDefinition.json"
            },
            {
              "name": "ApplianceResourceTemplate",
              "type": "Template",
              "uri": "https://path/to/mainTemplate.json"
            }
          ],
          "authorizations": [
            {
              "principalId": "validprincipalguid",
              "roleDefinitionId": "validroleguid"
            }
          ],
          "description": "myApplianceDef description",
          "displayName": "myApplianceDef",
          "lockLevel": null,
          "packageFileUri": "https://path/to/packagezipfile"
        }
      }
  name: Create or update appliance definition
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - description: impersonate your user account
    name: user_impersonation
name: CreateOrUpdate
uid: management.azure.com.resourcemanagement.appliancedefinitions.createorupdate
