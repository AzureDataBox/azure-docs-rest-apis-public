### YamlMime:RESTOperation
uid: management.azure.com.appservice.appserviceenvironments.createorupdate
name: Create Or Update
service: App Service
groupName: App Service Environments
apiVersion: 2016-09-01
summary: Create or update an App Service Environment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Web/hostingEnvironments/{name}?api-version=2016-09-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Your Azure subscription ID. This is a GUID-formatted string (e.g. 00000000-0000-0000-0000-000000000000).
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Name of the resource group to which the resource belongs.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+[^\.]$
- name: name
  in: path
  isRequired: true
  description: Name of the App Service Environment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: API Version
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: AppServiceEnvironmentResource
- name: 202 Accepted
  description: Operation is in progress.
  types:
  - uid: AppServiceEnvironmentResource
- name: 400 Bad Request
  description: Bad request.
- name: Other Status Codes
  description: Not found.
- name: Other Status Codes
  description: Conflict.
requestBody:
- parameters:
  - name: properties.name
    in: body
    isRequired: true
    description: "  \nName of the App Service Environment."
    types:
    - uid: string
  - name: properties.location
    in: body
    isRequired: true
    description: "  \nLocation of the App Service Environment, e.g. \"West US\"."
    types:
    - uid: string
  - name: properties.vnetName
    in: body
    description: "  \nName of the Virtual Network for the App Service Environment."
    types:
    - uid: string
  - name: properties.vnetResourceGroupName
    in: body
    description: "  \nResource group of the Virtual Network."
    types:
    - uid: string
  - name: properties.vnetSubnetName
    in: body
    description: "  \nSubnet of the Virtual Network."
    types:
    - uid: string
  - name: properties.virtualNetwork
    in: body
    isRequired: true
    description: "  \nDescription of the Virtual Network."
    types:
    - uid: VirtualNetworkProfile
  - name: properties.internalLoadBalancingMode
    in: body
    description: "  \nSpecifies which endpoints to serve internally in the Virtual Network for the App Service Environment."
    types:
    - uid: InternalLoadBalancingMode
  - name: properties.multiSize
    in: body
    description: "  \nFront-end VM size, e.g. \"Medium\", \"Large\"."
    types:
    - uid: string
  - name: properties.multiRoleCount
    in: body
    description: "  \nNumber of front-end instances."
    types:
    - uid: integer
  - name: properties.workerPools
    in: body
    isRequired: true
    description: "  \nWorker pool of an App Service Environment."
    types:
    - uid: WorkerPool
      isArray: true
  - name: properties.ipsslAddressCount
    in: body
    description: "  \nNumber of IP SSL addresses reserved for the App Service Environment."
    types:
    - uid: integer
  - name: properties.dnsSuffix
    in: body
    description: "  \nDNS suffix of the App Service Environment."
    types:
    - uid: string
  - name: properties.networkAccessControlList
    in: body
    description: "  \nNetwork access control entry."
    types:
    - uid: NetworkAccessControlEntry
      isArray: true
  - name: properties.frontEndScaleFactor
    in: body
    description: "  \nScale factor for front-ends."
    types:
    - uid: integer
  - name: properties.apiManagementAccountId
    in: body
    description: "  \nAPI Management Account associated with the App Service Environment."
    types:
    - uid: string
  - name: properties.suspended
    in: body
    description: "  \n<code>true</code> if the App Service Environment is suspended; otherwise, <code>false</code>. The environment can be suspended, e.g. when the management endpoint is no longer available\n (most likely because NSG blocked the incoming traffic)."
    types:
    - uid: boolean
  - name: properties.dynamicCacheEnabled
    in: body
    description: "  \nTrue/false indicating whether the App Service Environment is suspended. The environment can be suspended e.g. when the management endpoint is no longer available\n(most likely because NSG blocked the incoming traffic)."
    types:
    - uid: boolean
  - name: properties.clusterSettings
    in: body
    description: "  \nName value pair."
    types:
    - uid: NameValuePair
      isArray: true
  - name: properties.userWhitelistedIpRanges
    in: body
    description: "  "
    types:
    - uid: string
      isArray: true
  - name: kind
    in: body
    description: "  \nKind of resource."
    types:
    - uid: string
  - name: location
    in: body
    isRequired: true
    description: "  \nResource Location."
    types:
    - uid: string
  - name: tags
    in: body
    description: "  \nResource tags."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: VirtualNetworkProfile
  description: Description of the Virtual Network.
  kind: object
  properties:
  - name: id
    description: "  \nResource id of the Virtual Network."
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: "  \nName of the Virtual Network (read-only)."
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: "  \nResource type of the Virtual Network (read-only)."
    types:
    - uid: string
  - name: subnet
    description: "  \nSubnet within the Virtual Network."
    types:
    - uid: string
- name: WorkerPool
  description: Description of worker pools with worker size IDs, VM sizes, and number of workers in each pool.
  kind: object
  properties:
  - name: workerSizeId
    description: "  \nWorker size ID for referencing this worker pool."
    types:
    - uid: integer
  - name: computeMode
    description: "  \nShared or dedicated app hosting."
    types:
    - uid: ComputeModeOptions
  - name: workerSize
    description: "  \nVM size of the worker pool instances."
    types:
    - uid: string
  - name: workerCount
    description: "  \nNumber of instances in the worker pool."
    types:
    - uid: integer
  - name: instanceNames
    isReadyOnly: true
    description: "  "
    types:
    - uid: string
      isArray: true
- name: VirtualIPMapping
  description: Additional virtual IPs.
  kind: object
  properties:
  - name: virtualIP
    description: "  \nVirtual IP address."
    types:
    - uid: string
  - name: internalHttpPort
    description: "  \nInternal HTTP port."
    types:
    - uid: integer
  - name: internalHttpsPort
    description: "  \nInternal HTTPS port."
    types:
    - uid: integer
  - name: inUse
    description: "  \nIs virtual IP mapping in use."
    types:
    - uid: boolean
- name: StampCapacity
  description: Current total, used, and available worker capacities.
  kind: object
  properties:
  - name: name
    description: "  \nName of the stamp."
    types:
    - uid: string
  - name: availableCapacity
    description: "  \nAvailable capacity (# of machines, bytes of storage etc...)."
    types:
    - uid: integer
  - name: totalCapacity
    description: "  \nTotal capacity (# of machines, bytes of storage etc...)."
    types:
    - uid: integer
  - name: unit
    description: "  \nName of the unit."
    types:
    - uid: string
  - name: computeMode
    description: "  \nShared/dedicated workers."
    types:
    - uid: ComputeModeOptions
  - name: workerSize
    description: "  \nSize of the machines."
    types:
    - uid: WorkerSizeOptions
  - name: workerSizeId
    description: "  \nSize ID of machines: \n0 - Small\n1 - Medium\n2 - Large"
    types:
    - uid: integer
  - name: excludeFromCapacityAllocation
    description: "  \nIf <code>true</code>, it includes basic apps.\nBasic apps are not used for capacity allocation."
    types:
    - uid: boolean
  - name: isApplicableForAllComputeModes
    description: "  \n<code>true</code> if capacity is applicable for all apps; otherwise, <code>false</code>."
    types:
    - uid: boolean
  - name: siteMode
    description: "  \nShared or Dedicated."
    types:
    - uid: string
- name: NetworkAccessControlEntry
  description: Access control list for controlling traffic to the App Service Environment.
  kind: object
  properties:
  - name: action
    description: "  \nAction object."
    types:
    - uid: AccessControlEntryAction
  - name: description
    description: "  \nDescription of network access control entry."
    types:
    - uid: string
  - name: order
    description: "  \nOrder of precedence."
    types:
    - uid: integer
  - name: remoteSubnet
    description: "  \nRemote subnet."
    types:
    - uid: string
- name: NameValuePair
  description: Custom settings for changing the behavior of the App Service Environment.
  kind: object
  properties:
  - name: name
    description: "  \nPair name."
    types:
    - uid: string
  - name: value
    description: "  \nPair value."
    types:
    - uid: string
- name: AppServiceEnvironmentResource
  description: Collection of resources.
  kind: object
  properties:
  - name: properties.name
    description: "  \nName of the App Service Environment."
    types:
    - uid: string
  - name: properties.location
    description: "  \nLocation of the App Service Environment, e.g. \"West US\"."
    types:
    - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: "  \nProvisioning state of the App Service Environment."
    types:
    - uid: ProvisioningState
  - name: properties.status
    isReadyOnly: true
    description: "  \nCurrent status of the App Service Environment."
    types:
    - uid: HostingEnvironmentStatus
  - name: properties.vnetName
    description: "  \nName of the Virtual Network for the App Service Environment."
    types:
    - uid: string
  - name: properties.vnetResourceGroupName
    description: "  \nResource group of the Virtual Network."
    types:
    - uid: string
  - name: properties.vnetSubnetName
    description: "  \nSubnet of the Virtual Network."
    types:
    - uid: string
  - name: properties.virtualNetwork
    description: "  \nDescription of the Virtual Network."
    types:
    - uid: VirtualNetworkProfile
  - name: properties.internalLoadBalancingMode
    description: "  \nSpecifies which endpoints to serve internally in the Virtual Network for the App Service Environment."
    types:
    - uid: InternalLoadBalancingMode
  - name: properties.multiSize
    description: "  \nFront-end VM size, e.g. \"Medium\", \"Large\"."
    types:
    - uid: string
  - name: properties.multiRoleCount
    description: "  \nNumber of front-end instances."
    types:
    - uid: integer
  - name: properties.workerPools
    description: "  \nWorker pool of an App Service Environment."
    types:
    - uid: WorkerPool
      isArray: true
  - name: properties.ipsslAddressCount
    description: "  \nNumber of IP SSL addresses reserved for the App Service Environment."
    types:
    - uid: integer
  - name: properties.databaseEdition
    isReadyOnly: true
    description: "  \nEdition of the metadata database for the App Service Environment, e.g. \"Standard\"."
    types:
    - uid: string
  - name: properties.databaseServiceObjective
    isReadyOnly: true
    description: "  \nService objective of the metadata database for the App Service Environment, e.g. \"S0\"."
    types:
    - uid: string
  - name: properties.upgradeDomains
    isReadyOnly: true
    description: "  \nNumber of upgrade domains of the App Service Environment."
    types:
    - uid: integer
  - name: properties.subscriptionId
    isReadyOnly: true
    description: "  \nSubscription of the App Service Environment."
    types:
    - uid: string
  - name: properties.dnsSuffix
    description: "  \nDNS suffix of the App Service Environment."
    types:
    - uid: string
  - name: properties.lastAction
    isReadyOnly: true
    description: "  \nLast deployment action on the App Service Environment."
    types:
    - uid: string
  - name: properties.lastActionResult
    isReadyOnly: true
    description: "  \nResult of the last deployment action on the App Service Environment."
    types:
    - uid: string
  - name: properties.allowedMultiSizes
    isReadyOnly: true
    description: "  \nList of comma separated strings describing which VM sizes are allowed for front-ends."
    types:
    - uid: string
  - name: properties.allowedWorkerSizes
    isReadyOnly: true
    description: "  \nList of comma separated strings describing which VM sizes are allowed for workers."
    types:
    - uid: string
  - name: properties.maximumNumberOfMachines
    isReadyOnly: true
    description: "  \nMaximum number of VMs in the App Service Environment."
    types:
    - uid: integer
  - name: properties.vipMappings
    isReadyOnly: true
    description: "  \nVirtual IP mapping."
    types:
    - uid: VirtualIPMapping
      isArray: true
  - name: properties.environmentCapacities
    isReadyOnly: true
    description: "  \nStamp capacity information."
    types:
    - uid: StampCapacity
      isArray: true
  - name: properties.networkAccessControlList
    description: "  \nNetwork access control entry."
    types:
    - uid: NetworkAccessControlEntry
      isArray: true
  - name: properties.environmentIsHealthy
    isReadyOnly: true
    description: "  \nTrue/false indicating whether the App Service Environment is healthy."
    types:
    - uid: boolean
  - name: properties.environmentStatus
    isReadyOnly: true
    description: "  \nDetailed message about with results of the last check of the App Service Environment."
    types:
    - uid: string
  - name: properties.resourceGroup
    isReadyOnly: true
    description: "  \nResource group of the App Service Environment."
    types:
    - uid: string
  - name: properties.frontEndScaleFactor
    description: "  \nScale factor for front-ends."
    types:
    - uid: integer
  - name: properties.defaultFrontEndScaleFactor
    isReadyOnly: true
    description: "  \nDefault Scale Factor for FrontEnds."
    types:
    - uid: integer
  - name: properties.apiManagementAccountId
    description: "  \nAPI Management Account associated with the App Service Environment."
    types:
    - uid: string
  - name: properties.suspended
    description: "  \n<code>true</code> if the App Service Environment is suspended; otherwise, <code>false</code>. The environment can be suspended, e.g. when the management endpoint is no longer available\n (most likely because NSG blocked the incoming traffic)."
    types:
    - uid: boolean
  - name: properties.dynamicCacheEnabled
    description: "  \nTrue/false indicating whether the App Service Environment is suspended. The environment can be suspended e.g. when the management endpoint is no longer available\n(most likely because NSG blocked the incoming traffic)."
    types:
    - uid: boolean
  - name: properties.clusterSettings
    description: "  \nName value pair."
    types:
    - uid: NameValuePair
      isArray: true
  - name: properties.userWhitelistedIpRanges
    description: "  "
    types:
    - uid: string
      isArray: true
  - name: id
    isReadyOnly: true
    description: "  \nResource Id."
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: "  \nResource Name."
    types:
    - uid: string
  - name: kind
    description: "  \nKind of resource."
    types:
    - uid: string
  - name: location
    description: "  \nResource Location."
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: "  \nResource type."
    types:
    - uid: string
  - name: tags
    description: "  \nResource tags."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ComputeModeOptions
  description: Shared or dedicated app hosting.
  kind: enum
  properties:
  - name: Shared
    types:
    - uid: string
  - name: Dedicated
    types:
    - uid: string
  - name: Dynamic
    types:
    - uid: string
- name: WorkerSizeOptions
  description: Size of the machines.
  kind: enum
  properties:
  - name: Default
    types:
    - uid: string
  - name: Small
    types:
    - uid: string
  - name: Medium
    types:
    - uid: string
  - name: Large
    types:
    - uid: string
  - name: D1
    types:
    - uid: string
  - name: D2
    types:
    - uid: string
  - name: D3
    types:
    - uid: string
- name: AccessControlEntryAction
  description: Action object.
  kind: enum
  properties:
  - name: Permit
    types:
    - uid: string
  - name: Deny
    types:
    - uid: string
- name: ProvisioningState
  description: Provisioning state of the App Service Environment.
  kind: enum
  properties:
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
- name: HostingEnvironmentStatus
  description: Current status of the App Service Environment.
  kind: enum
  properties:
  - name: Preparing
    types:
    - uid: string
  - name: Ready
    types:
    - uid: string
  - name: Scaling
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
- name: InternalLoadBalancingMode
  description: Specifies which endpoints to serve internally in the Virtual Network for the App Service Environment.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: Web
    types:
    - uid: string
  - name: Publishing
    types:
    - uid: string
examples: []
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
