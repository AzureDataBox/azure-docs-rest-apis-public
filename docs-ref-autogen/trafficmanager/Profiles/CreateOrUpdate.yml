### YamlMime:RESTOperation
summary: Create or update a Traffic Manager profile.
service: Traffic Manager
apiVersion: 2017-05-01
groupName: Profiles
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/trafficmanagerprofiles/{profileName}?api-version=2017-05-01
uriParameters:
- in: path
  isRequired: true
  description: Gets subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
  name: subscriptionId
- in: path
  isRequired: true
  description: The name of the resource group containing the Traffic Manager profile.
  types:
  - uid: string
  name: resourceGroupName
- in: path
  isRequired: true
  description: The name of the Traffic Manager profile.
  types:
  - uid: string
  name: profileName
- in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
  name: api-version
responses:
- description: The created or updated Traffic Manager profile.
  types:
  - uid: Profile
  name: 200 OK
- description: The created or updated Traffic Manager profile.
  types:
  - uid: Profile
  name: 201 Created
- description: Default response. It will be deserialized as per the Error definition.
  types:
  - uid: CloudError
  name: Other Status Codes
requestBody:
- parameters:
  - in: body
    description: The status of the Traffic Manager profile.
    types:
    - uid: ProfileStatus
    name: properties.profileStatus
  - in: body
    description: The traffic routing method of the Traffic Manager profile.
    types:
    - uid: TrafficRoutingMethod
    name: properties.trafficRoutingMethod
  - in: body
    description: The DNS settings of the Traffic Manager profile.
    types:
    - uid: DnsConfig
    name: properties.dnsConfig
  - in: body
    description: The endpoint monitoring settings of the Traffic Manager profile.
    types:
    - uid: MonitorConfig
    name: properties.monitorConfig
  - in: body
    description: The list of endpoints in the Traffic Manager profile.
    types:
    - uid: Endpoint
    name: properties.endpoints
  - in: body
    description: Resource tags.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: tags
  - in: body
    description: The Azure Region where the resource lives
    types:
    - uid: string
    name: location
requestHeader: []
definitions:
- name: DnsConfig
  description: Class containing DNS settings in a Traffic Manager profile.
  kind: object
  properties:
  - description: The relative DNS name provided by this Traffic Manager profile. This value is combined with the DNS domain name used by Azure Traffic Manager to form the fully-qualified domain name (FQDN) of the profile.
    types:
    - uid: string
    name: relativeName
  - isReadyOnly: true
    description: The fully-qualified domain name (FQDN) of the Traffic Manager profile. This is formed from the concatenation of the RelativeName with the DNS domain used by Azure Traffic Manager.
    types:
    - uid: string
    name: fqdn
  - description: The DNS Time-To-Live (TTL), in seconds. This informs the local DNS resolvers and DNS clients how long to cache DNS responses provided by this Traffic Manager profile.
    types:
    - uid: integer
    name: ttl
- name: MonitorConfig
  description: Class containing endpoint monitoring settings in a Traffic Manager profile.
  kind: object
  properties:
  - description: The profile-level monitoring status of the Traffic Manager profile.
    types:
    - uid: ProfileMonitorStatus
    name: profileMonitorStatus
  - description: The protocol (HTTP, HTTPS or TCP) used to probe for endpoint health.
    types:
    - uid: MonitorProtocol
    name: protocol
  - description: The TCP port used to probe for endpoint health.
    types:
    - uid: integer
    name: port
  - description: The path relative to the endpoint domain name used to probe for endpoint health.
    types:
    - uid: string
    name: path
  - description: The monitor interval for endpoints in this profile. This is the interval at which Traffic Manager will check the health of each endpoint in this profile.
    types:
    - uid: integer
    name: intervalInSeconds
  - description: The monitor timeout for endpoints in this profile. This is the time that Traffic Manager allows endpoints in this profile to response to the health check.
    types:
    - uid: integer
    name: timeoutInSeconds
  - description: The number of consecutive failed health check that Traffic Manager tolerates before declaring an endpoint in this profile Degraded after the next failed health check.
    types:
    - uid: integer
    name: toleratedNumberOfFailures
- name: Endpoint
  description: Class representing a Traffic Manager endpoint.
  kind: object
  properties:
  - description: The Azure Resource URI of the of the endpoint. Not applicable to endpoints of type 'ExternalEndpoints'.
    types:
    - uid: string
    name: properties.targetResourceId
  - description: The fully-qualified DNS name of the endpoint. Traffic Manager returns this value in DNS responses to direct traffic to this endpoint.
    types:
    - uid: string
    name: properties.target
  - description: The status of the endpoint. If the endpoint is Enabled, it is probed for endpoint health and is included in the traffic routing method.
    types:
    - uid: EndpointStatus
    name: properties.endpointStatus
  - description: The weight of this endpoint when using the 'Weighted' traffic routing method. Possible values are from 1 to 1000.
    types:
    - uid: integer
    name: properties.weight
  - description: The priority of this endpoint when using the ‘Priority’ traffic routing method. Possible values are from 1 to 1000, lower values represent higher priority. This is an optional parameter.  If specified, it must be specified on all endpoints, and no two endpoints can share the same priority value.
    types:
    - uid: integer
    name: properties.priority
  - description: Specifies the location of the external or nested endpoints when using the ‘Performance’ traffic routing method.
    types:
    - uid: string
    name: properties.endpointLocation
  - description: The monitoring status of the endpoint.
    types:
    - uid: EndpointMonitorStatus
    name: properties.endpointMonitorStatus
  - description: The minimum number of endpoints that must be available in the child profile in order for the parent profile to be considered available. Only applicable to endpoint of type 'NestedEndpoints'.
    types:
    - uid: integer
    name: properties.minChildEndpoints
  - description: The list of countries/regions mapped to this endpoint when using the ‘Geographic’ traffic routing method. Please consult Traffic Manager Geographic documentation for a full list of accepted values.
    types:
    - uid: string
    name: properties.geoMapping
  - isReadyOnly: true
    description: Fully qualified resource Id for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/trafficManagerProfiles/{resourceName}
    types:
    - uid: string
    name: id
  - isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
    name: name
  - isReadyOnly: true
    description: The type of the resource. Ex- Microsoft.Network/trafficmanagerProfiles.
    types:
    - uid: string
    name: type
- name: Profile
  description: Class representing a Traffic Manager profile.
  kind: object
  properties:
  - description: The status of the Traffic Manager profile.
    types:
    - uid: ProfileStatus
    name: properties.profileStatus
  - description: The traffic routing method of the Traffic Manager profile.
    types:
    - uid: TrafficRoutingMethod
    name: properties.trafficRoutingMethod
  - description: The DNS settings of the Traffic Manager profile.
    types:
    - uid: DnsConfig
    name: properties.dnsConfig
  - description: The endpoint monitoring settings of the Traffic Manager profile.
    types:
    - uid: MonitorConfig
    name: properties.monitorConfig
  - description: The list of endpoints in the Traffic Manager profile.
    types:
    - uid: Endpoint
    name: properties.endpoints
  - description: Resource tags.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: tags
  - description: The Azure Region where the resource lives
    types:
    - uid: string
    name: location
  - isReadyOnly: true
    description: Fully qualified resource Id for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/trafficManagerProfiles/{resourceName}
    types:
    - uid: string
    name: id
  - isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
    name: name
  - isReadyOnly: true
    description: The type of the resource. Ex- Microsoft.Network/trafficmanagerProfiles.
    types:
    - uid: string
    name: type
- name: CloudError
  description: An error returned by the Azure Resource Manager
  kind: object
  properties:
  - description: The content of the error.
    types:
    - uid: CloudErrorBody
    name: error
- name: CloudErrorBody
  description: The content of an error returned by the Azure Resource Manager
  kind: object
  properties:
  - description: Error code
    types:
    - uid: string
    name: code
  - description: Error message
    types:
    - uid: string
    name: message
  - description: Error target
    types:
    - uid: string
    name: target
  - description: Error details
    types:
    - uid: CloudErrorBody
    name: details
examples:
- request:
    uri: PUT https://management.azure.com/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager1421/providers/Microsoft.Network/trafficmanagerprofiles/azsmnet6386?api-version=2017-05-01
    requestBody: >-
      {

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azsmnet6386",

            "ttl": 35

          },

          "monitorConfig": {

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx"

          }

        },

        "location": "global"

      }
  responses:
  - statusCode: "201"
    body: >-
      {

        "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager1421/providers/Microsoft.Network/trafficManagerProfiles/azsmnet6386",

        "name": "azsmnet6386",

        "type": "Microsoft.Network/trafficManagerProfiles",

        "location": "global",

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azsmnet6386",

            "fqdn": "azsmnet6386.tmpreview.watmtest.azure-test.net",

            "ttl": 35

          },

          "monitorConfig": {

            "profileMonitorStatus": "Inactive",

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx",

            "intervalInSeconds": 30,

            "toleratedNumberOfFailures": 3,

            "timeoutInSeconds": 10

          },

          "endpoints": []

        }

      }
  - statusCode: "200"
    body: >-
      {

        "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager1421/providers/Microsoft.Network/trafficManagerProfiles/azsmnet6386",

        "name": "azsmnet6386",

        "type": "Microsoft.Network/trafficManagerProfiles",

        "location": "global",

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azsmnet6386",

            "fqdn": "azsmnet6386.tmpreview.watmtest.azure-test.net",

            "ttl": 35

          },

          "monitorConfig": {

            "profileMonitorStatus": "Inactive",

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx",

            "intervalInSeconds": 30,

            "toleratedNumberOfFailures": 3,

            "timeoutInSeconds": 10

          },

          "endpoints": []

        }

      }
  name: Profile-PUT-NoEndpoints
- request:
    uri: PUT https://management.azure.com/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager2583/providers/Microsoft.Network/trafficmanagerprofiles/azuresdkfornetautoresttrafficmanager6192?api-version=2017-05-01
    requestBody: >-
      {

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azuresdkfornetautoresttrafficmanager6192",

            "ttl": 35

          },

          "monitorConfig": {

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx",

            "intervalInSeconds": 10,

            "timeoutInSeconds": 5,

            "toleratedNumberOfFailures": 2

          },

          "endpoints": [

            {

              "name": "My external endpoint",

              "type": "Microsoft.network/TrafficManagerProfiles/ExternalEndpoints",

              "properties": {

                "target": "foobar.contoso.com",

                "endpointStatus": "Enabled",

                "endpointLocation": "North Europe"

              }

            }

          ]

        },

        "location": "global"

      }
  responses:
  - statusCode: "201"
    body: >-
      {

        "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager2583/providers/Microsoft.Network/trafficManagerProfiles/azuresdkfornetautoresttrafficmanager6192",

        "name": "azuresdkfornetautoresttrafficmanager6192",

        "type": "Microsoft.Network/trafficManagerProfiles",

        "location": "global",

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azuresdkfornetautoresttrafficmanager6192",

            "fqdn": "azuresdkfornetautoresttrafficmanager6192.tmpreview.watmtest.azure-test.net",

            "ttl": 35

          },

          "monitorConfig": {

            "profileMonitorStatus": "CheckingEndpoints",

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx",

            "intervalInSeconds": 10,

            "toleratedNumberOfFailures": 2,

            "timeoutInSeconds": 5

          },

          "endpoints": [

            {

              "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager2583/providers/Microsoft.Network/trafficManagerProfiles/azuresdkfornetautoresttrafficmanager6192/externalEndpoints/My external endpoint",

              "name": "My external endpoint",

              "type": "Microsoft.Network/trafficManagerProfiles/externalEndpoints",

              "properties": {

                "endpointStatus": "Enabled",

                "endpointMonitorStatus": "CheckingEndpoint",

                "target": "foobar.contoso.com",

                "weight": 1,

                "priority": 1,

                "endpointLocation": "North Europe"

              }

            }

          ]

        }

      }
  - statusCode: "200"
    body: >-
      {

        "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager2583/providers/Microsoft.Network/trafficManagerProfiles/azuresdkfornetautoresttrafficmanager6192",

        "name": "azuresdkfornetautoresttrafficmanager6192",

        "type": "Microsoft.Network/trafficManagerProfiles",

        "location": "global",

        "properties": {

          "profileStatus": "Enabled",

          "trafficRoutingMethod": "Performance",

          "dnsConfig": {

            "relativeName": "azuresdkfornetautoresttrafficmanager6192",

            "fqdn": "azuresdkfornetautoresttrafficmanager6192.tmpreview.watmtest.azure-test.net",

            "ttl": 35

          },

          "monitorConfig": {

            "profileMonitorStatus": "CheckingEndpoints",

            "protocol": "HTTP",

            "port": 80,

            "path": "/testpath.aspx",

            "intervalInSeconds": 10,

            "toleratedNumberOfFailures": 2,

            "timeoutInSeconds": 5

          },

          "endpoints": [

            {

              "id": "/subscriptions/e68d4145-c9ae-4667-925d-c51c8d88ad73/resourceGroups/azuresdkfornetautoresttrafficmanager2583/providers/Microsoft.Network/trafficManagerProfiles/azuresdkfornetautoresttrafficmanager6192/externalEndpoints/My external endpoint",

              "name": "My external endpoint",

              "type": "Microsoft.Network/trafficManagerProfiles/externalEndpoints",

              "properties": {

                "endpointStatus": "Enabled",

                "endpointMonitorStatus": "CheckingEndpoint",

                "target": "foobar.contoso.com",

                "weight": 1,

                "priority": 1,

                "endpointLocation": "North Europe"

              }

            }

          ]

        }

      }
  name: Profile-PUT-WithEndpoints
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - description: impersonate your user account
    name: user_impersonation
name: CreateOrUpdate
uid: management.azure.com.trafficmanager.profiles.createorupdate
