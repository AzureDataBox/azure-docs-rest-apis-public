### YamlMime:RESTOperation
uid: atlas.microsoft.com.locationbasedservicesfunctionalapi.search.postsearchroutedfilter
name: Post Search Routed Filter
service: Location Based Services Functional API
groupName: Search
apiVersion: "1.0"
summary: This endpoint comes handy when a list of POIs is already available and needs to be filtered using a list of geometries. It will return POIs that lie within any of the geometries.
consumes: []
produces:
- application/json
- application/xml
paths:
- content: POST https://atlas.microsoft.com/search/routed/filter/{format}?subscription-key={subscription-key}&api-version=1.0&lat={lat}&lon={lon}&heading={heading}
uriParameters:
- name: format
  in: path
  isRequired: true
  description: Desired format of the response. Possible values are json & xml.
  types:
  - uid: string
- name: subscription-key
  in: query
  isRequired: true
  description: Azure Maps subscription key
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version number of Azure Maps API.  Current version is 1.0
  types:
  - uid: string
- name: lat
  in: query
  isRequired: true
  description: Latitude where results should be biased.  E.g. 37.337
  types:
  - uid: number
- name: lon
  in: query
  isRequired: true
  description: Longitude where results should be biased.  E.g. -121.89
  types:
  - uid: number
- name: heading
  in: query
  isRequired: true
  description: The directional heading of the vehicle in degrees, for travel along a segment of roadway. 0 is North, 90 is East and so on, values range from -360 to 360. The precision can include upto one decimal place
  types:
  - uid: number
responses:
- name: 200 OK
  description: OK
  types:
  - uid: SearchRoutedResult
- name: 400 Bad Request
  description: 'Bad request: one or more parameters were incorrectly specified or are mutually exclusive.'
  types:
  - uid: Error
- name: Other Status Codes
  description: 'Unauthorized: Access is denied due to invalid credentials.'
  types:
  - uid: Error
- name: Other Status Codes
  description: Permission, capacity, or authentication issues.
  types:
  - uid: Error
- name: Other Status Codes
  description: 'Not Found: the requested resource could not be found, but it may be available again in the future.'
  types:
  - uid: Error
- name: Other Status Codes
  description: An error occurred while processing the request. Please try again later.
  types:
  - uid: Error
requestBody:
- parameters:
  - name: poi
    in: body
    description: A Postion of interest
    types:
    - uid: Poi
  - name: position
    in: body
    description: A Postion of interest
    types:
    - uid: Position
  - name: address
    in: body
    types:
    - uid: Address
requestHeader: []
definitions:
- name: Poi
  description: POI property
  kind: object
  properties:
  - name: name
    isReadyOnly: true
    description: Name property
    types:
    - uid: string
  - name: phone
    isReadyOnly: true
    description: Phone property
    types:
    - uid: string
  - name: url
    isReadyOnly: true
    description: URL property
    types:
    - uid: string
  - name: categories
    isReadyOnly: true
    description: Categories array
    types:
    - uid: string
      isArray: true
  - name: classifications
    isReadyOnly: true
    description: Classification array
    types:
    - uid: Classification
      isArray: true
- name: Position
  description: Coordinates of the result
  kind: object
  properties:
  - name: lat
    isReadyOnly: true
    description: Latitude property
    types:
    - uid: number
  - name: lon
    isReadyOnly: true
    description: Longitude property
    types:
    - uid: number
- name: Address
  description: The address of the result
  kind: object
  properties:
  - name: buildingNumber
    isReadyOnly: true
    description: Building Number property
    types:
    - uid: string
  - name: street
    isReadyOnly: true
    description: Street property
    types:
    - uid: string
  - name: crossStreet
    isReadyOnly: true
    description: Cross Street property
    types:
    - uid: string
  - name: streetNumber
    isReadyOnly: true
    description: Street Number property
    types:
    - uid: string
  - name: streetName
    isReadyOnly: true
    description: Street Name property
    types:
    - uid: string
  - name: streetNameAndNumber
    isReadyOnly: true
    description: Street Name and Number property
    types:
    - uid: string
  - name: municipality
    isReadyOnly: true
    description: Municipality property
    types:
    - uid: string
  - name: municipalitySubdivision
    isReadyOnly: true
    description: Municipality Subdivision property
    types:
    - uid: string
  - name: countryTertiarySubdivision
    isReadyOnly: true
    description: Country Tertiary Subdivision property
    types:
    - uid: string
  - name: countrySecondarySubdivision
    isReadyOnly: true
    description: Country Secondary Subdivision property
    types:
    - uid: string
  - name: countrySubdivision
    isReadyOnly: true
    description: Country Subdivision property
    types:
    - uid: string
  - name: postalCode
    isReadyOnly: true
    description: Postal Code property
    types:
    - uid: string
  - name: extendedPostalCode
    isReadyOnly: true
    description: Extended Postal Code property
    types:
    - uid: string
  - name: countryCode
    isReadyOnly: true
    description: Country Code property
    types:
    - uid: string
  - name: country
    isReadyOnly: true
    description: Country property
    types:
    - uid: string
  - name: countryCodeISO3
    isReadyOnly: true
    description: Country Code ISO3 property
    types:
    - uid: string
  - name: freeformAddress
    isReadyOnly: true
    description: Free form Address property
    types:
    - uid: string
  - name: countrySubdivisionName
    isReadyOnly: true
    description: Country Subdividion Name property
    types:
    - uid: string
  - name: boundingBox
    description: Bounding Box for the address
    types:
    - uid: BoundingBox
- name: SearchRoutedResult
  description: This object is returned from a successful Routed Search call
  kind: object
  properties:
  - name: summary
    isReadyOnly: true
    description: Summary object
    types:
    - uid: Summary
  - name: results
    isReadyOnly: true
    description: Results array
    types:
    - uid: SearchRoutedResultArray
      isArray: true
- name: Error
  description: This object is returned when an error occurs in the Location Based Service API
  kind: object
  properties:
  - name: statuscode
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: If available, a human readable description of the error.
    types:
    - uid: string
- name: PoiDef
  kind: object
  properties:
  - name: poi
    description: A Postion of interest
    types:
    - uid: Poi
  - name: position
    description: A Postion of interest
    types:
    - uid: Position
  - name: address
    types:
    - uid: Address
- name: Classification
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Code property
    types:
    - uid: string
  - name: names
    isReadyOnly: true
    description: Names array
    types:
    - uid: ClassificationName
      isArray: true
- name: BoundingBox
  description: Bounding Box for the address
  kind: object
  properties:
  - name: northEast
    isReadyOnly: true
    description: The North East coordinates for the Bounding Box
    types:
    - uid: string
  - name: southWest
    isReadyOnly: true
    description: The South West coordinates for the Bounding Box
    types:
    - uid: string
- name: Summary
  description: Summary object
  kind: object
  properties:
  - name: query
    isReadyOnly: true
    description: Query property
    types:
    - uid: string
  - name: queryType
    isReadyOnly: true
    description: QueryType property
    types:
    - uid: string
  - name: queryTime
    isReadyOnly: true
    description: QueryTime property
    types:
    - uid: integer
  - name: numResults
    isReadyOnly: true
    description: NumResults property
    types:
    - uid: integer
  - name: offset
    isReadyOnly: true
    description: Offset property
    types:
    - uid: integer
  - name: totalResults
    isReadyOnly: true
    description: TotalResults property
    types:
    - uid: integer
  - name: fuzzyLevel
    isReadyOnly: true
    description: FuzzyLevel property
    types:
    - uid: integer
- name: SearchRoutedResultArray
  kind: object
  properties:
  - name: type
    isReadyOnly: true
    description: Type property
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Id property
    types:
    - uid: string
  - name: score
    isReadyOnly: true
    description: Score property
    types:
    - uid: number
  - name: dist
    isReadyOnly: true
    description: Distance property
    types:
    - uid: number
  - name: info
    isReadyOnly: true
    description: Info property
    types:
    - uid: string
  - name: poi
    description: POI property
    types:
    - uid: Poi
  - name: address
    description: The address of the result
    types:
    - uid: Address
  - name: position
    description: Coordinates of the result
    types:
    - uid: Position
  - name: viewport
    description: The viewport that covers the result
    types:
    - uid: Viewport
  - name: entryPoints
    description: Entry Points array
    types:
    - uid: EntityPoint
      isArray: true
  - name: route
    description: Route object
    types:
    - uid: Route
- name: ClassificationName
  kind: object
  properties:
  - name: nameLocale
    isReadyOnly: true
    description: Name Locale property
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name property
    types:
    - uid: string
- name: Viewport
  description: The viewport that covers the result
  kind: object
  properties:
  - name: topLeftPoint
    description: Top left of the viewport
    types:
    - uid: TopLeftPoint
  - name: btmRightPoint
    description: Bottom right of the viewport
    types:
    - uid: BtmRightPoint
- name: EntityPoint
  kind: object
  properties:
  - name: type
    isReadyOnly: true
    description: Name Locale property
    types:
    - uid: string
  - name: position
    isReadyOnly: true
    description: Name property
    types:
    - uid: Position
- name: Route
  description: Route object
  kind: object
  properties:
  - name: routeGeometry
    description: Route geometry point(lat,lon) array
    types:
    - uid: string
      isArray: true
  - name: routeInstructions
    isReadyOnly: true
    description: RouteInstructions property
    types:
    - uid: RouteInstructions
  - name: routeSummary
    isReadyOnly: true
    description: RouteSummary property
    types:
    - uid: RouteSummary
- name: TopLeftPoint
  description: Top left of the viewport
  kind: object
  properties:
  - name: lat
    isReadyOnly: true
    description: Latitude
    types:
    - uid: number
  - name: lon
    isReadyOnly: true
    description: Longitude
    types:
    - uid: number
- name: BtmRightPoint
  description: Bottom right of the viewport
  kind: object
  properties:
  - name: lat
    isReadyOnly: true
    description: Latitude
    types:
    - uid: number
  - name: lon
    isReadyOnly: true
    description: Longitude
    types:
    - uid: number
- name: RouteInstructions
  description: RouteInstructions property
  kind: object
  properties:
  - name: list
    isReadyOnly: true
    description: List of instructions
    types:
    - uid: Instruction
      isArray: true
  - name: language
    isReadyOnly: true
    description: Language property
    types:
    - uid: string
- name: RouteSummary
  description: RouteSummary property
  kind: object
  properties:
  - name: boundingBox
    isReadyOnly: true
    description: BoundingBox property
    types:
    - uid: BoundingBox
  - name: totalDistance
    isReadyOnly: true
    description: TotalDistance property
    types:
    - uid: TotalDistance
  - name: totalTime
    isReadyOnly: true
    description: TotalTime property
    types:
    - uid: string
  - name: totalTravelTime
    isReadyOnly: true
    description: TotalTravelTime property
    types:
    - uid: string
  - name: totalWaitTime
    isReadyOnly: true
    description: TotalWaitTime property
    types:
    - uid: string
- name: Instruction
  kind: object
  properties:
  - name: Instruction
    isReadyOnly: true
    description: Instruction property
    types:
    - uid: string
  - name: Point
    isReadyOnly: true
    description: 'Point property. Format: Lat,Lon'
    types:
    - uid: string
  - name: description
    isReadyOnly: true
    description: Description  property
    types:
    - uid: string
  - name: distance
    isReadyOnly: true
    description: Distance property
    types:
    - uid: Distance
  - name: duration
    isReadyOnly: true
    description: Duration property
    types:
    - uid: string
  - name: waitTime
    isReadyOnly: true
    description: WaitTime property
    types:
    - uid: string
  - name: turnAngle
    isReadyOnly: true
    description: TurnAngle property
    types:
    - uid: number
  - name: turn
    isReadyOnly: true
    description: Turn property
    types:
    - uid: string
  - name: tour
    isReadyOnly: true
    description: Tour property
    types:
    - uid: integer
  - name: sideOfStreet
    isReadyOnly: true
    types:
    - uid: string
- name: TotalDistance
  description: TotalDistance property
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: Distance value property
    types:
    - uid: number
  - name: uom
    isReadyOnly: true
    description: Unit of Measurement property
    types:
    - uid: string
- name: Distance
  description: Distance property
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: Value  property
    types:
    - uid: number
  - name: uom
    isReadyOnly: true
    description: Unit of Measure  property
    types:
    - uid: string
examples:
- name: GetSearchResultsInsideGeometryFilter
  request:
    uri: POST https://atlas.microsoft.com/search/routed/filter/json?subscription-key=<insert-key>&api-version=1.0&lat=40.80558&lon=-117.2378&heading=0
    body: >-
      [
        {
          "poi": {
            "name": "S Restaurant Tom's"
          },
          "address": {
            "freeformAddress": "2880 Broadway, New York, NY 10025"
          },
          "position": {
            "type": "Feature",
            "geometry": {
              "type": "Point",
              "coordinates": [
                -117.2378,
                40.80558
              ]
            },
            "properties": {
              "prop0": "value0"
            }
          }
        }
      ]
  responses:
  - statusCode: "200"
    body: >-
      {
        "summary": {
          "numResults": 1,
          "queryTime": 200
        },
        "results": [
          {
            "poi": {
              "name": "S Restaurant Tom's"
            },
            "address": {
              "freeformAddress": "2880 Broadway, New York, NY 10025"
            },
            "position": {
              "lat": 32.87349,
              "lon": -117.2378
            },
            "route": {
              "routeGeometry": [
                "32.87347, -117.23788",
                "32.87352, -117.23789",
                "32.87362, -117.23792",
                "32.87379, -117.23799",
                "32.87393, -117.23805",
                "32.87418, -117.23817",
                "32.87412, -117.23828",
                "32.87384, -117.23813",
                "32.87372, -117.23807",
                "32.8736, -117.23802",
                "32.87343, -117.23797",
                "32.87335, -117.23796",
                "32.87324, -117.23794",
                "32.8729, -117.23791",
                "32.87267, -117.23789",
                "32.87248, -117.23789",
                "32.87237, -117.23788",
                "32.87228, -117.23788",
                "32.87219, -117.23789",
                "32.87206, -117.2379",
                "32.87195, -117.23791",
                "32.87182, -117.23793",
                "32.87169, -117.23795",
                "32.8715, -117.23799",
                "32.87143, -117.238",
                "32.87135, -117.23801",
                "32.87121, -117.23804",
                "32.87123, -117.23787",
                "32.87132, -117.23786",
                "32.87172, -117.23779",
                "32.87184, -117.23777",
                "32.87191, -117.23776",
                "32.87195, -117.23776",
                "32.87208, -117.23775",
                "32.87224, -117.23773",
                "32.87236, -117.23773",
                "32.87247, -117.23773",
                "32.87259, -117.23774",
                "32.87271, -117.23775",
                "32.87295, -117.23777",
                "32.87314, -117.2378",
                "32.87324, -117.23782",
                "32.87336, -117.23785",
                "32.8734, -117.23786",
                "32.87346, -117.23777"
              ],
              "routeInstructions": {
                "list": [
                  {
                    "Instruction": "Proceed North on Gilman Dr",
                    "Point": "32.87347,-117.23788",
                    "description": "route maneuver 1",
                    "distance": {
                      "value": 0,
                      "uom": "MI"
                    },
                    "duration": "P0DT0H0M0S",
                    "waitTime": "P0DT0H0M0S",
                    "turnAngle": 0,
                    "turn": "Proceed",
                    "tour": 0
                  },
                  {
                    "Instruction": "Make left U-Turn onto Gilman Dr",
                    "Point": "32.87418,-117.23817",
                    "description": "route maneuver 2",
                    "distance": {
                      "value": 0.0515,
                      "uom": "MI"
                    },
                    "duration": "P0DT0H1M7S",
                    "waitTime": "P0DT0H0M0S",
                    "turnAngle": -182.5,
                    "turn": "Make a U-Turn",
                    "tour": 0
                  },
                  {
                    "Instruction": "Make left U-Turn onto Gilman Dr",
                    "Point": "32.87121,-117.23804",
                    "description": "route maneuver 3",
                    "distance": {
                      "value": 0.2124,
                      "uom": "MI"
                    },
                    "duration": "P0DT0H1M31S",
                    "waitTime": "P0DT0H0M0S",
                    "turnAngle": -180.7,
                    "turn": "Make a U-Turn",
                    "tour": 0
                  },
                  {
                    "Instruction": "Arrive at destination",
                    "Point": "32.87346,-117.23777",
                    "description": "route maneuver 4",
                    "distance": {
                      "value": 0.167,
                      "uom": "MI"
                    },
                    "duration": "P0DT0H0M21S",
                    "waitTime": "P0DT0H0M0S",
                    "turnAngle": 0,
                    "tour": 0,
                    "sideOfStreet": "Left"
                  }
                ],
                "language": "english"
              },
              "routeSummary": {
                "boundingBox": {
                  "topLeftPoint": "32.87418, -117.23828000000002",
                  "btmRightPoint": "32.87120999999999, -117.23773000000003"
                },
                "totalDistance": {
                  "value": 0.4307,
                  "uom": "MI"
                },
                "totalTime": "P0DT0H3M5S",
                "totalTravelTime": "P0DT0H3M5S",
                "totalWaitTime": "P0DT0H0M0S"
              }
            }
          }
        ]
      }
  - statusCode: "400"
    body: >-
      {
        "statuscode": "400",
        "message": "Bad request: one or more parameters were incorrectly specified or are mutually exclusive."
      }
  - statusCode: "401"
    body: >-
      {
        "statuscode": "401",
        "message": "Unauthorized: Access is denied due to invalid credentials."
      }
  - statusCode: "403"
    body: >-
      {
        "statuscode": "403",
        "message": "Permission, capacity, or authentication issues."
      }
  - statusCode: "404"
    body: >-
      {
        "statuscode": "404",
        "message": "Not Found: the requested resource could not be found, but it may be available again in the future."
      }
  - statusCode: "500"
    body: >-
      {
        "statuscode": "500",
        "message": "An error occurred while processing the request. Please try again later."
      }
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
- name: subscription-key
  type: apiKey
  in: query
