---
title: "Authenticate with Azure Active Directory (Preview)"
ms.custom: na
ms.date: 2016-12-13
ms.prod: azure
ms.reviewer: na
ms.service: storage
ms.suite: na
ms.tgt_pltfrm: na
ms.topic: reference
ms.assetid: 96cec7bc-63cc-4227-920a-dddd850433c9
caps.latest.revision: 63
author: tamram
manager: jeconnoc
translation.priority.mt: 
  - de-de
  - es-es
  - fr-fr
  - it-it
  - ja-jp
  - ko-kr
  - pt-br
  - ru-ru
  - zh-cn
  - zh-tw
---
# Authenticate with Azure Active Directory (Preview)

Azure Storage provides integration with Azure Active Directory (Azure AD) for identity-based authentication of requests to the Blob and Queue services.  With Azure AD, you can use role-based access control (RBAC) to grant access to your Azure Storage resources to users, groups, or applications. During the  preview, you can grant permissions that are scoped to the level of an individual container or queue. 

To learn more about Azure AD integration in Azure Storage and about the preview, see [Authenticating requests to Azure Storage using Azure Active Directory (Preview)](https://docs.microsoft.com/azure/storage/common/storage-authentication-aad).

## Access tokens for Azure Storage

Azure Storage accepts OAuth 2.0 access tokens from the Azure AD tenant associated with the subscription that contains the storage account. Azure Storage accepts access tokens for:

- Users and groups
- Service principals 
- Managed service identities
- Applications using permissions delegated by users 

Azure storage exposes a single delegation scope named `user_impersonation` that permits applications to take any action allowed by the user.

To request tokens for Azure storage, specify the value `https://storage.azure.com/` for the Resource ID.

For more information on requesting access tokens from Azure AD for users and service principals, see [Authentication scenarios for Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-authentication-scenarios).

For more information about requesting access tokens for resources configured with a manage service Identity, see [How to use an Azure VM Managed Service Identity (MSI) for token acquisition](https://docs.microsoft.com/azure/active-directory/managed-service-identity/how-to-use-vm-token).

## Call storage operations with OAuth tokens

To call Blob and Queue service operations using OAuth access tokens, pass the access token in the **Authorization** header using the **Bearer** scheme, and specify a service version of 2017-11-09 or higher, as shown in the following example:

```
GET /container/file.txt HTTP/1.1
Host: mystorageaccount.blob.core.windows.net
x-ms-version: 2017-11-09
Authorization: Bearer eyJ0eXAiOnJKV1...Xd6j
```    

## Permissions required by REST operations

The following tables describe the permissions necessary to call Azure Storage operations. To enable a client to call a particular operation, ensure that the client's assigned RBAC role offers sufficient permissions for that operation.  

### Permissions for Blob service operations

| Blob service operation                                                                                                            | RBAC action                                                                                                                                                                                                                                                                                                                                                                              |
|-----------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [List Containers](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/list-containers2)                        | Microsoft.Storage/storageAccounts/blobServices/containers/read (at storage account scope)                                                                                                                                                                                                                                                                                                |
| [Set Blob Service Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-blob-service-properties) | Microsoft.Storage/storageAccounts/blobServices/write                                                                                                                                                                                                                                                                                                                                     |
| [Get Blob Service Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-blob-service-properties) | Microsoft.Storage/storageAccounts/blobServices/read                                                                                                                                                                                                                                                                                                                                      |
| [Preflight Blob Request](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/preflight-blob-request)           | Anon                                                                                                                                                                                                                                                                                                                                                                                     |
| [Get Blob Service Stats](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-blob-service-stats)           | Microsoft.Storage/storageAccounts/blobServices/read                                                                                                                                                                                                                                                                                                                                      |
| [Create Container](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/create-container)                       | Microsoft.Storage/storageAccounts/blobServices/containers/write                                                                                                                                                                                                                                                                                                                          |
| [Get Container Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-container-properties)       | Microsoft.Storage/storageAccounts/blobServices/containers/read                                                                                                                                                                                                                                                                                                                           |
| [Get Container Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-container-metadata)           | Microsoft.Storage/storageAccounts/blobServices/containers/read                                                                                                                                                                                                                                                                                                                           |
| [Set Container Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-container-metadata)           | Microsoft.Storage/storageAccounts/blobServices/containers/write                                                                                                                                                                                                                                                                                                                          |
| [Get Container ACL](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-container-acl)                     | Not available via OAuth                                                                                                                                                                                                                                                                                                                                                                  |
| [Set Container ACL](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-container-acl)                     | Not available via OAuth                                                                                                                                                                                                                                                                                                                                                                  |
| [Delete Container](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/delete-container)                       | Microsoft.Storage/storageAccounts/blobServices/containers/delete                                                                                                                                                                                                                                                                                                                         |
| [Lease Container](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/lease-container)                         | Microsoft.Storage/storageAccounts/blobServices/containers/write                                                                                                                                                                                                                                                                                                                          |
| [List Blobs](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/list-blobs)                                   | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read (at container scope)                                                                                                                                                                                                                                                                                                |
| [Put Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-blob)                                       | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write for create or replace, or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action for create of new blob                                                                                                                                                                                        |
| [Get Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-blob)                                       | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read                                                                                                                                                                                                                                                                                                                     |
| [Get Blob Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-blob-properties)                 | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read                                                                                                                                                                                                                                                                                                                     |
| [Set Blob Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-blob-properties)                 | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Get Blob Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-blob-metadata)                     | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read                                                                                                                                                                                                                                                                                                                     |
| [Set Blob Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-blob-metadata)                     | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Lease Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/lease-blob)                                   | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Snapshot Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/snapshot-blob)                             | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action                                                                                                                                                                                                                                      |
| [Copy Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/copy-blob)                                     | for destination: Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action (for new blob at destination)  for source in same account: Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read for source in different account: available as anonymous, or include valid SAS token |
| [Abort Copy Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/abort-copy-blob)                         | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Delete Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/delete-blob)                                 | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/delete                                                                                                                                                                                                                                                                                                                   |
| [Put Block](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-block)                                     | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action                                                                                                                                                                                                                                      |
| [Put Block List](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-block-list)                           | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Get Block List](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-block-list)                           | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read                                                                                                                                                                                                                                                                                                                     |
| [Put Page](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-page)                                       | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write                                                                                                                                                                                                                                                                                                                    |
| [Get Page Ranges](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-page-ranges)                         | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read                                                                                                                                                                                                                                                                                                                     |
| [Incremental Copy Blob](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/incremental-copy-blob)             | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write for destination, Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read for source, or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action for new blob                                                                                                                       |
| [Append Block](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/append-block)                               | Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write or Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action                                                                                                                                                                                                                                      |

### Permissions for Queue service operations

| Queue service operation                                                                                                             | RBAC action                                                                                                                                                                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [List Queues](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/list-queues1)                                  | Microsoft.Storage/storageAccounts/queueServices/queues/read (at storage account scope)                                                                                                                                            |
| [Set Queue Service Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-queue-service-properties) | Microsoft.Storage/storageAccounts/queueServices/read                                                                                                                                                                              |
| [Get Queue Service Properties](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-queue-service-properties) | Microsoft.Storage/storageAccounts/queueServices/read                                                                                                                                                                              |
| [Preflight Queue Request](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/preflight-queue-request)           | anon                                                                                                                                                                                                                              |
| [Get Queue Service Stats](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-queue-service-stats)           | Microsoft.Storage/storageAccounts/queueServices/read                                                                                                                                                                              |
| [Create Queue](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/create-queue4)                                | Microsoft.Storage/storageAccounts/queueServices/queues/write                                                                                                                                                                      |
| [Delete Queue](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/delete-queue3)                                | Microsoft.Storage/storageAccounts/queueServices/queues/delete                                                                                                                                                                     |
| [Get Queue Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-queue-metadata)                     | Microsoft.Storage/storageAccounts/queueServices/queues/read                                                                                                                                                                       |
| [Set Queue Metadata](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-queue-metadata)                     | Microsoft.Storage/storageAccounts/queueServices/queues/write                                                                                                                                                                      |
| [Get Queue ACL](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-queue-acl)                               | Not available via OAuth                                                                                                                                                                                                           |
| [Set Queue ACL](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/set-queue-acl)                               | Not available via OAuth                                                                                                                                                                                                           |
| [Put Message](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/put-message)                                   | Microsoft.Storage/storageAccounts/queueServices/queues/messages/add/action                                                                                                                                                        |
|                                                                                                                                     | or Microsoft.Storage/storageAccounts/queueServices/queues/messages/write                                                                                                                                                          |
| [Get Messages](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-messages)                                 | Microsoft.Storage/storageAccounts/queueServices/queues/messages/process/action                                                                                                                                                    |
|                                                                                                                                     | or (Microsoft.Storage/storageAccounts/queueServices/queues/messages/delete                                                                                                                                                        |
|                                                                                                                                     | and Microsoft.Storage/storageAccounts/queueServices/queues/messages/read)                                                                                                                                                         |
| [Peek Messages](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/peek-messages)                               | Microsoft.Storage/storageAccounts/queueServices/queues/messages/read                                                                                                                                                              |
| [Delete Message](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/delete-message2)                            | Microsoft.Storage/storageAccounts/queueServices/queues/messages/process/action                                                                                                                                                    |
|                                                                                                                                     | or Microsoft.Storage/storageAccounts/queueServices/queues/messages/delete                                                                                                                                                         |
| [Clear Messages](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/clear-messages)                             | Microsoft.Storage/storageAccounts/queueServices/queues/messages/delete                                                                                                                                                            |
| [Update Message](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/update-message)                             | Microsoft.Storage/storageAccounts/queueServices/queues/messages/write                                                                                                                                                             |
